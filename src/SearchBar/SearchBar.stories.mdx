import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { withKnobs, select, boolean, text } from "@storybook/addon-knobs";
import { action } from '@storybook/addon-actions';
import Stack from '../Layout/Stack';
import Feather from 'react-native-vector-icons/Feather';
import SearchBar from './SearchBar';

<Meta title="Design System|SearchBar" component={SearchBar} />

# SearchBar
A SearchBar is a wrapper around `TextInput` with commonly used styles and easy to make customization. Receives all the props of `Input` component.

# Usage
```js
import { SearchBar } from 'react-native-design-system';

<SearchBar
  round
  value={this.state.text}
  onChangeText={text => handleChange(text)}
/>
```

# Props
<Props of={SearchBar} />

# Type
There are three types of button mainly: `default`, `round`, and `outline`. You can pass boolean value `round={true}` for round button, `outline={true}` for outline button and nothing for default solid button.
<Preview>
  <Story name="type">
    <Stack>
      <SearchBar
        value=""
        onChangeText={text => action('pressed')}
      />
      <SearchBar
        round
        value=""
        onChangeText={text => action('pressed')}
      />
      <SearchBar
        outline
        value=""
        onChangeText={text => action('pressed')}
      />
      <SearchBar
        outline
        round
        value=""
        onChangeText={text => action('pressed')}
      />
    </Stack>
  </Story>
</Preview>

# Label
Pass `label` to render a label string above SearchBar. You can customise label using `labelColor` and `labelStyle` props.

<Preview>
  <Story name="label">
    <SearchBar
        outline
        label="Username"
        placeholder="Enter Username"
        value=""
        onChangeText={text => action('pressed')}
      />
  </Story>
</Preview>

# Error and Error Caption
Pass `error={true}` when you want to show error and pass `errorCaption` string to render the string below SearchBar to notify user about the error.

<Preview>
  <Story name="error">
    <SearchBar
        outline
        error={true}
        value=""
        errorCaption="Please try again"
        onChangeText={text => action('pressed')}
      />
  </Story>
</Preview>

# Color
Pass `color` from brandColor to change outline color of SearchBar. Background is managed by `background` property inside theme. You can also directly pass a `background` prop with one of the colors in `brandColor`.

<Preview>
  <Story name="color">
    <SearchBar
        outline
        color="secondary"
        placeholder="Enter username"
        value=""
        onChangeText={text => action('pressed')}
      />
  </Story>
</Preview>

# Disabled
`disabled={true}` property restrict any kind of action on SearchBar.
<Preview>
  <Story name="disabled">
    <SearchBar
      outline
      disabled
      placeholder="Enter username"
      value=""
      onChangeText={text => action('pressed')}
    />
  </Story>
</Preview>

# onCancel
pass a function to `onCancel` to clear the input or cancel search. It will be triggered on clicking right icon. Cancel icon (right) will appear only when there is some text inside SearchBar. Right can be customised by passing any icon to `rightIcon` prop.

<Preview>
  <Story name="onCancel">
    <SearchBar
      outline
      value="I typed something..."
      onChangeText={text => action('pressed')}
      onCancel={text => action('pressed')}
    />
  </Story>
</Preview>

# Loading
Pass `loading={true}` to show a indicator while the search is going on.

<Preview>
  <Story name="loading">
    <SearchBar
      round
      value="Searching for something..."
      loading={true}
      onChangeText={text => action('pressed')}
      onCancel={text => action('pressed')}
    />
  </Story>
</Preview>

# Size 
As usual, 7 available sized.

<Preview>
  <Story name="size">
    <Stack>
      <SearchBar
        outline
        size="xxsmall"
        placeholder="Enter username"
        value=""
        loading
        onChangeText={text => action('pressed')}
      />
      <SearchBar
        outline
        size="xsmall"
        placeholder="Enter username"
        value=""
        loading
        onChangeText={text => action('pressed')}
      />
      <SearchBar
        outline
        size="small"
        placeholder="Enter username"
        value=""
        loading
        onChangeText={text => action('pressed')}
      />
      <SearchBar
        outline
        size="medium"
        placeholder="Enter username"
        value=""
        loading
        onChangeText={text => action('pressed')}
      />
      <SearchBar
        outline
        size="large"
        placeholder="Enter username"
        value=""
        loading
        onChangeText={text => action('pressed')}
      />
      <SearchBar
        outline
        size="xlarge"
        placeholder="Enter username"
        value=""
        loading
        onChangeText={text => action('pressed')}
      />
      <SearchBar
        outline
        size="xxlarge"
        placeholder="Enter username"
        value=""
        loading
        onChangeText={text => action('pressed')}
      />
    </Stack>
  </Story>
</Preview>

# Icon
You can pass any icon via `leftIcon` and `rightIcon` props.
> Icon size and color should be defined by developers manually according to button size.

<Preview>
  <Story name="icon">
    <SearchBar
        outline
        placeholder="Search for location"
        leftIcon={
          <Feather
            name="crosshair"
            size={22}
            color="grey" 
          />
        }
        value=""
        onChangeText={text => action('pressed')}
      />
  </Story>
</Preview>

# Playground
Play with SearchBar in Canvas mode.

<Story name="playground" parameters={{ decorators: [withKnobs] }}>
  <SearchBar
    size={select('size', ['xxsmall', 'xsmall', 'small', 'medium', 'large', 'xlarge', 'xxlarge'], 'medium')}
    outline={boolean('outline', false)}
    round={boolean('round', true)}
    loading={boolean('loading', true)}
    value={text('value', 'Type something')}
    error={boolean('error', false)}
    errorCaption={text('errorCaption', 'Please try again')}
    onChangeText={text => action('text changed')}
    onCancel={text => action('cancel triggered')}
  />
</Story>